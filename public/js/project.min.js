function counterInit(){var e=0,t=document.createElement("audio");t.setAttribute("src","../audios/count.mp3"),t.addEventListener("ended",function(){this.play()},!1),t.play(),setTimeout(function(){e++,$(".counter-number-1").addClass("opened")},1100),setTimeout(function(){$(".counter-number-1").removeClass("opened")},2700),setTimeout(function(){e++,$(".counter-number-2").addClass("opened")},3800),setTimeout(function(){$(".counter-number-2").removeClass("opened")},5250),setTimeout(function(){e++,$(".counter-number-3").addClass("opened")},6700),setTimeout(function(){t.pause(),$(".counter-number-3").removeClass("opened"),$(".counter").remove()},9500)}function checkRecurrantUser(){null!=localStorage.getItem("username")?($(mainPage).removeClass("untriggered"),$(mainPage).addClass("open-window"),$("body").addClass("main-opened")):($(userFormPage).removeClass("untriggered"),$(userFormPage).addClass("open-window"))}function fillWelcomeText(e){$(welcomeText).find("h1").append(e+"!")}function loaderInit(e){if("undefined"!=typeof e)var e=e;else var e=1e3;setTimeout(function(){$(loader).addClass("triggered")},e),setTimeout(function(){$(loader).remove()},e+transitionTime)}function randomString(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",t=3,a="",o=0;o<t;o++){var n=Math.floor(Math.random()*e.length);a+=e.substring(n,n+1)}return a}var audioElementLiftMusic=document.createElement("audio");audioElementLiftMusic.setAttribute("src","../audios/elevator-music.mp3"),audioElementLiftMusic.addEventListener("ended",function(){this.play()},!1);var audioElementLiftArrive=document.createElement("audio");audioElementLiftArrive.setAttribute("src","../audios/elevator-arrive.mp3"),audioElementLiftArrive.addEventListener("ended",function(){this.play()},!1);var audioElementPeter=document.createElement("audio");audioElementPeter.setAttribute("src","../audios/elevator-cigiszunet.mp3"),audioElementPeter.addEventListener("ended",function(){this.play()},!1);var socket=io.connect(),$messageForm=$("#messageForm"),$messageFormButton=$("#messageFormButton"),$message=$("#message"),$chat=$("#chat"),$userForm=$("#userForm"),$userFormArea=$("#userFormArea"),$users=$("#users"),$username=$("#username"),checkbox=$(".custom-checkbox"),$welcomeText=$("#welcome-text"),userFormPage=$("#userFormArea"),welcomeText=$("#welcome-text"),mainPage=$("#mainPage"),avatarPage=$("#avatar-page"),loader=$("#loader"),transitionTime=500;$(function(){$messageForm.submit(function(e){e.preventDefault(),socket.emit("send message",$message.val()),$message.val("")}),socket.on("new message",function(e){$chat.append('<div class="well"><p><span> '+e.user+": </span>"+e.msg+"</p></div>"),$chat.animate({scrollTop:$chat.prop("scrollHeight")},1e3)}),$("#clear").click(function(){localStorage.clear(),location.reload()}),null!=localStorage.getItem("username")&&socket.emit("new user",localStorage.getItem("username"),function(e){e&&($userFormArea.hide(),$(mainPage).addClass("open-window-main"),setTimeout(function(){$("#"+localStorage.getItem("username")).prop("disabled",!1)},10))}),$userForm.submit(function(e){e.preventDefault();var t=$username.val();fillWelcomeText(t),$("#avatar img").addClass(t),socket.emit("new user",t,function(e){e&&($(userFormPage).addClass("triggered"),$(welcomeText).addClass("open-window"),setTimeout(function(){$welcomeText.addClass("triggered"),$(avatarPage).addClass("open-window")},2e3),$("#avatar .btn").click(function(){var e=$("."+localStorage.getItem("username"));$users.append(e),console.log(e),$(avatarPage).addClass("triggered"),$(mainPage).addClass("open-window"),setTimeout(function(){$("body").addClass("main-opened")},2500)}))})}),socket.on("get users",function(e){var t="";for(i=0;i<e.length;i++)t+='<label class="'+e[i].status+'" id="'+e[i].username+'">'+e[i].username+"</label>",console.log(e[i].username),localStorage.username=e[i].username;$users.html(t),$("#users label").on("click",function(){$(this).toggleClass("waiting ready")}),$("#users label").click(function(){socket.emit("valuechange",$(this).attr("class"))})}),socket.on("XXX",function(e){e.forEach(function(e){"ready"==e.status?($("#"+e.username).addClass("ready"),$("#"+e.username).removeClass("waiting")):($("#"+e.username).removeClass("ready"),$("#"+e.username).addClass("waiting"))})}),$(document).keydown(function(e){40==e.keyCode&&socket.emit("moveLift","+=5px"),38==e.keyCode&&socket.emit("moveLift","-=5px"),$(".lift svg").css("top")<$(".lift").offset().top&&($("body").css({display:"none"}),audioElementLiftMusic.pause(),audioElementLiftArrive.play(),setTimeout(function(){audioElementPeter.play()},500)),$(".lift svg").css("top")>="600px"&&($("body").css({display:"none"}),audioElementLiftMusic.pause(),audioElementLiftArrive.play(),setTimeout(function(){audioElementPeter.play()},500),setTimeout(function(){audioElementPeter.pause(),audioElementLiftArrive.pause()},1200))}),socket.on("liftmove",function(e){$(".lift svg").css({top:e})})}),$(document).ready(function(){checkRecurrantUser(),setTimeout(function(){$("#"+localStorage.getItem("username")).prop("disabled",!1)},10)}),$(window).on("load",function(){loaderInit(0)});var defaultImage="https://api.adorable.io/avatars/285/abott@";$("#avatar .submit").click(function(){$("#avatar img").attr("src",defaultImage+randomString()+".png")});